<!DOCTYPE html><html lang="en" class="serif"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>The Trouble with Tuning Systems</title><meta property="og:title" content="The Trouble with Tuning Systems"><meta property="og:type" content="website"><meta property="og:description" content="Exploring the mathematical impossibilities behind musical tuning."><meta name="description" content="Exploring the mathematical impossibilities behind musical tuning."><link rel="stylesheet" href="/stylesheets/highlight-style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css"><link rel="stylesheet" href="/stylesheets/main.css"><script>const loadSetting = name => {
    if(localStorage.getItem(name) === "true")
        document.documentElement.classList.add(name);
    else
        document.documentElement.classList.remove(name);
};

loadSetting("serif");
loadSetting("darkmode");</script><script defer src="/scripts/ui.js"></script><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="canonical" href="https://blog.bithole.dev/blogposts/tuning"></head><body><header><a href="/"><img src="/images/banner.jpg" alt="blog banner"></a></header><main><p id="date" class="date">undefined NaN, NaN</p><h1 style="margin-top: 0">The Trouble with Tuning Systems</h1><nav><div id="contents"><p>Table of Contents</p><a href="#coda"><p>Coda</p></a></div><button id="show-toc">&#9776; Contents</button></nav><p>You can tuna fish, but you can&#39;t tune a piano. Wait, what?</p>
<p>Okay, that&#39;s not quite true. You <em>can</em> tune a piano, but only approximately. It turns out that the mathematics behind the 12-tone scale used in most Western music hides some sinister secrets.</p>
<p>Let&#39;s start with the basics. Behind every key on a piano are 1&ndash;3 strings, which have been tensioned so that when the strings are struck they will ring out at a specific frequency. Each note is associated with a distinct frequency, and keys are arranged such that the pitch of the notes increases from left to right.</p>
<p>Of course, the burning question remains: how do we know what frequency to assign to each note? The answer to this is pretty nuanced, but luckily we get one freebie. Every tuning system starts by assigning a specific frequency to an arbitrary key to use as a reference point; we call this the pitch standard. The most common pitch standard in modern times is A440, which sets the frequency of the first A above middle C to 440 Hz.</p>
<p>Now, let&#39;s do a little experiment. This is what it sounds like if I play A<sub>4</sub> on my piano.</p>
<p><audio controls src="a4.mp3"></audio></p>
<p>Ironically, my piano is pretty badly out of tune, but that doesn&#39;t matter for this demonstration. I can use <a href="https://en.wikipedia.org/wiki/Fourier_transform">a bit of math</a> to take the sound and dissect it into the individual frequencies that make it up, kind of like how a prism can split light into its color components. Here is the resulting spectrum:</p>
<figure>
    <img loading="lazy" src="spectrum.png" alt="spectral power distribution of piano note">
    <figcaption>Disclaimer: the y-axis is a log scale.</figcaption>
</figure>

<p>There&#39;s a big peak representing the main frequency, but there are also a bunch of extra peaks, which are known as overtones or partials. The reason for their production has to do with the physics of string vibration. Essentially, a string that is fixed at both ends is limited to vibrating at integer multiples of its fundamental frequency. For example, in this case, we see additional peaks at 880 Hz, 1320 Hz, 1760 Hz, and so on. These patterns of vibration are called <em>resonant modes</em>, and collectively, they form the harmonic series.</p>
<p>When a string is struck or plucked, the resulting vibration contains multiple of these resonant modes, creating a complex spectrum like the one that we observed. The same phenomenon is actualy exhibited by many other oscillating systems besides strings. For example, air in a tube is also confined to resonating at multiples of the tube&#39;s fundamental frequency. This is why, for a given fingering, a French horn player is restricted to playing notes within the harmonic series. </p>
<p>When two tones from the harmonic series are played together, we generally perceive the result to be fairly pleasant, or <em>consonant</em> (as opposed to dissonant). While much of what we perceive to be harmonious is subjective and dependent on cultural context, it is true that our ears usually interpet notes which share a lot of overtones as more consonant. This phenomenon was known to many early musicians such as the Ancient Greeks, who went on to incorporate these intervals in their composition. Indeed, there is a widely circulated story recounting how Pythagoras was brought to this epiphany after listening to four blacksmiths striking anvils which produced tones of different pitches, though like most stories involving Pythagoras, it is probably apocryphal.</p>
<p>Try it for yourself&mdash;click the Play button to hear the intervals formed by the harmonic series!</p>
<p><button onclick="play()">Play</button></p>
<p><canvas id="harmonics" width="640" height="500"></canvas></p>
<script src="main.js"></script>

<p>Okay, so we&#39;re making some real progress. We know from the <a href="https://en.wikipedia.org/wiki/Circle_of_fifths">circle of fifths</a> that we can start from any note and advance in perfect fifths to cycle through the other 12 notes before returning to the starting note. Success! Right?</p>
<p>If you actually try this, you will realize that it doesn&#39;t quite work. We saw in the previous demo that a perfect fifth is represented by a frequency ratio of 3:2. So if we multiply the frequency of a note by 3/2 twelve times, we would expect to come back to the same note a few octaves up. Yet <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mrow><mo fence="true">(</mo><mfrac><mn>3</mn><mn>2</mn></mfrac><mo fence="true">)</mo></mrow><mn>12</mn></msup></mrow><annotation encoding="application/x-tex">\left(\frac32\right)^{12}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.404em;vertical-align:-0.35em;"></span><span class="minner"><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size1">)</span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.054em;"><span style="top:-3.3029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">12</span></span></span></span></span></span></span></span></span></span></span></span> is approximately <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>129.746</mn></mrow><annotation encoding="application/x-tex">129.746</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">129.746</span></span></span></span>, which is not a power of two!</p>
<p>The reason for this is mathematical. The square root of two is irrational, meaning that it is impossible to create it by multiplying together rational numbers (i.e. fractions of integers). In fact, pretty much all the intervals are <em>slightly</em> wrong. The problem becomes very apparent when you try to play chords using our accursed tuning system:</p>
<p><button onclick="playChordJust()">Play Chord</button></p>
<p>The rapid warbling sound you hear is an acoustic phenomenon known as <a href="https://en.wikipedia.org/wiki/Beat_(acoustics)">beating</a>, which occurs when two tones that are slightly out of tune are played together. For reference, here&#39;s what the same chord sounds like if we calculate the frequency of the other two notes based on the root note times the frequency ratios we figured out earlier:</p>
<p><button onclick="playChordPerfect()">Play Chord</button></p>
<h1 id="coda">Coda <a class="section-link" href="#coda">&sect;</a></h1><p><a href="https://www.youtube.com/watch?v=TYhPAbsIqA8">https://www.youtube.com/watch?v=TYhPAbsIqA8</a></p>
<p><a href="https://www.youtube.com/watch?v=1Hqm0dYKUx4">https://www.youtube.com/watch?v=1Hqm0dYKUx4</a></p>
<p><a href="https://www.ethanhein.com/wp/2022/tuning-is-hard/">https://www.ethanhein.com/wp/2022/tuning-is-hard/</a></p>
<p><a href="https://www.youtube.com/watch?v=HXLltEn4O5E">https://www.youtube.com/watch?v=HXLltEn4O5E</a></p>
<img id="img-view" style="display: none"><h1>Comments</h1><noscript><b>Please enable Javascript to view the comments on this post.</b></noscript><script src="https://utteranc.es/client.js" crossorigin="anonymous" repo="adrian154/blog" issue-term="title" label="blog-post-comments" theme="preferred-color-scheme"></script></main><footer><p>&copy; 2022 <a href="https://bithole.dev/">Adrian Zhang</a> &bull; <a href="/rss.xml">rss</a> &bull; <a href="https://github.com/adrian154/blog/tree/main/public/blogposts/tuning">source</a> &bull; <a href="https://creativecommons.org/licenses/by-sa/3.0/legalcode">CC BY-SA 3.0</a></p></footer></body></html>