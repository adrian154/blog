<!DOCTYPE html><html lang="en" class="serif"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Scaling the Great Firewall</title><meta property="og:title" content="Scaling the Great Firewall"><meta property="og:type" content="website"><link rel="stylesheet" href="/stylesheets/highlight-style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css"><link rel="stylesheet" href="/stylesheets/main.css"><script>const loadSetting = name => {
    if(localStorage.getItem(name) === "true")
        document.documentElement.classList.add(name);
    else
        document.documentElement.classList.remove(name);
};

loadSetting("serif");
loadSetting("darkmode");</script><script defer src="/scripts/ui.js"></script><link rel="icon" type="image/png" sizes="16x16" href="/favicon.png"><link rel="canonical" href="https://blog.bithole.dev/blogposts/gfw"></head><body><header><p><a id="home-link" href="/">Â« more posts</a></p><h1 id="post-title">Scaling the Great Firewall</h1></header><main><p>In my opinion, the most annoying thing about traveling to China is, by and large, the <a href="https://en.wikipedia.org/wiki/Great_Firewall">Great Firewall</a>&mdash;a collective term for various technologies used by the PRC to block a plethora of Western websites. For most people, this means no Google services, which is a very painful sacrifice to live with. So, let&#39;s learn about how we can circumvent the GFW.</p>
<p>At the most basic level, the Great Firewall blocks content through DNS hijacking IP-based packet dropping. For example, if we try to resolve the domain <code>google.com</code>, we receive a bogus response generated by the GFW. Even if you send the query to a host that isn&#39;t even running a resolver, you&#39;ll still receive the spoofed response.</p>
<p>(TODO: DNS hijacking demo)</p>
<p>DNS hijacking can be easily bypassed using DNS over TLS or DNS over HTTPS, but even if we have the real IPs of the services we&#39;re trying to connect to, any packets to blocked IPs will be dropped by the GFW.</p>
<p>(TODO: packet blocking demo)</p>
<p>This requires us to disguise the destination of our traffic. Usually, this is accomplished by routing through a tunnel, but common VPN protocols like OpenVPN and Wireguard are detected and dropped by the firewall. Thus, we need to take further measures to mask our VPN traffic as regular Internet usage.</p>
<h2 id="active-probing">Active Probing <a class="section-link" href="#active-probing">&sect;</a></h2><img id="img-view" style="display: none"></main><footer><p>&copy; 2022 <a href="https://bithole.dev/">Adrian Zhang</a> &bull; <a href="/rss.xml">rss</a> &bull; <a href="https://github.com/adrian154/blog/tree/main/public/blogposts/gfw">source</a> &bull; <a href="https://creativecommons.org/licenses/by-sa/3.0/legalcode">CC BY-SA 3.0</a></p></footer></body></html>