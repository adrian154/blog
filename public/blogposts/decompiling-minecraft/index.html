<!DOCTYPE html><html lang="en" class="serif"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Minecraft Decompilation Guide</title><meta property="og:title" content="Minecraft Decompilation Guide"><meta property="og:type" content="website"><meta property="og:description" content="An tutorial on how to decompile modern versions of Minecraft using Mojang's official mappings."><meta name="description" content="An tutorial on how to decompile modern versions of Minecraft using Mojang's official mappings."><link rel="stylesheet" href="/stylesheets/highlight-style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css"><link rel="stylesheet" href="/stylesheets/main.css"><script>const loadSetting = name => {
    if(localStorage.getItem(name) === "true")
        document.documentElement.classList.add(name);
    else
        document.documentElement.classList.remove(name);
};

loadSetting("serif");
loadSetting("darkmode");</script><script defer src="/scripts/ui.js"></script><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="canonical" href="https://blog.bithole.dev/blogposts/decompiling-minecraft"></head><body><header><a href="/"><img src="/images/banner.png" alt="blog banner"></a></header><main><p id="date" class="date">June 14, 2022</p><h1 style="margin-top: 0">Minecraft Decompilation Guide</h1><nav><div id="contents"><p>Table of Contents</p><a href="#getting-the-files"><p>Getting the Files</p></a><a href="#renaming"><p>Renaming</p></a><a href="#decompiling"><p>Decompiling</p></a><a href="#epilogue"><p>Epilogue</p></a></div><button id="show-toc">&#9776; Contents</button></nav><p>If you&#39;ve ever tried optimizing a farm in Minecraft, you know that there are many questions about the game&#39;s mechanics which aren&#39;t answered anywhere on the Internet. When that time comes, you are generally forced to conduct an experiment in an attempt to probe the underlying behavior. However, there&#39;s actually a better alternative: decompiling the game and directly viewing the source code.</p>
<p>Decompiling Minecraft wasn&#39;t always an option. The game is obfuscated to prevent its source code from being understood, meaning that all variable, method, and class names are randomized. Here&#39;s what that obfuscation looks like:</p>
<p><img src="obfuscated.png" alt="picture of decompiled MC source, showing randomized names"></p>
<p>As you can see, this is code is essentially impossible to understand. Yet a very determined group of individuals analyzed the decompiled source and assigned each obfuscated identifier a meaningful name, creating the <a href="https://github.com/ModCoderPack">Mod Coder Pack</a>. For a long time, this was the only way to view Minecraft&#39;s source code. However, when snapshot 19w36a was released in March 2019, Mojang announced that they would be <a href="https://www.minecraft.net/en-us/article/minecraft-snapshot-19w36a">releasing official obfuscation maps</a> alongside future releases to make modding easier. This changed everything; suddenly, <em>every</em> obfuscated name (save for local variables) can be deobfuscated. For <a href="http://cpw.github.io/MinecraftMappingData.html">various reasons</a>, the biggest Minecraft modding project (Forge) was unable to directly use the maps. However, for curious players like you and I, decompiling Minecraft using the official maps is the best way to go if your goal is to understand Minecraft&#39;s mechanics.</p>
<p>So how do we do it? Before we begin, we need to do a little <em>mise en place</em>; that is, obtain the actual game JAR and mappings.</p>
<h1 id="getting-the-files">Getting the Files <a class="section-link" href="#getting-the-files">&sect;</a></h1><p>You may not know this, but the location of all Minecraft game files is available at <a href="https://launchermeta.mojang.com/mc/game/version_manifest.json">https://launchermeta.mojang.com/mc/game/version_manifest.json</a>. Today, I&#39;ll be decompiling the 1.18.2 server, but you should be able to adapt my procedure to any version. To find the JSON manifest for a given version, just Ctrl+F through the file until you find the desired entry. Each version manifest contains the URL of all the files needed to run that version (including the client and server), as well as the mappings for those JARs. If you don&#39;t want to parse the JSON, you can just search for <code>client_mappings</code> or <code>server_mappings</code>.</p>
<aside>

<p>For convenience, I made a page with links to the downloads for all versions released at the time of writing with obfuscation maps available; check it out <a href="links.html">here</a>.</p>
</aside>

<h1 id="renaming">Renaming <a class="section-link" href="#renaming">&sect;</a></h1><p>The first thing we&#39;re gonna do is rename all the names in the game JAR using the obfuscation mappings. This can be accomplished using a tool called <a href="https://github.com/md-5/SpecialSource">SpecialSource</a>, which can be obtained through <a href="https://search.maven.org/remotecontent?filepath=net/md-5/SpecialSource/1.11.0/SpecialSource-1.11.0-shaded.jar">Maven</a>. Make sure to download the shaded version, or else dependencies necessary to run the tool will be missing.</p>
<p>Here&#39;s the usage for remapping a JAR:</p>
<pre><code class="hljs">java -jar SpecialSource-1.11.0-shaded.jar -i &lt;original JAR&gt; -o &lt;output filename&gt; -m &lt;mappings filename&gt; --kill-lvt</code></pre><p>The <code>--kill-lvt</code> flag tells SpecialSource to ignore local variables. We include it since Mojang&#39;s official mappings do not include local variable names.</p>
<h1 id="decompiling">Decompiling <a class="section-link" href="#decompiling">&sect;</a></h1><p>Once the JAR is remapped, it&#39;s ready to be decompiled. Unfortunately, compilation is a lossy process, even for a VM language like Java. This means that decompilers often produce imperfect output; essentially, not all decompilers are made equal. As a result, quite a few people have attempted to tackle the problem of decompilation, producing a great many decompilers. Most have been abandoned, but a few are still being actively developed:</p>
<ul>
<li><a href="https://github.com/JetBrains/intellij-community/tree/master/plugins/java-decompiler/engine">Fernflower</a></li>
<li><a href="https://www.benf.org/other/cfr/">CFR</a></li>
</ul>
<p>Thankfully, in our case, the choice of decompiler is not that important since we don&#39;t need to recompile the game. I&#39;ll be using <a href="https://github.com/QuiltMC/quiltflower">Quiltflower</a> in today&#39;s decompilation. Quiltflower is a fork of Fernflower created for the <a href="https://quiltmc.org/">QuiltMC</a> project, with patches to produce more concise output in certain situations. Quiltflower is a drop-in replacement for Fernflower, so the following steps should work just as well if you&#39;re using Fernflower.</p>
<p>The first step is to obtain Quiltflower, which can be downloaded from its GitHub page. Next, we can begin the decompilation:</p>
<pre><code class="hljs">java -jar quiltflower-1.8.1.jar &lt;remapped JAR&gt; src/</code></pre><p>Quiltflower decompiles fairly quickly; on my computer, the entire process finished in under a minute. (It&#39;ll go even faster if you don&#39;t accidentally decompile the obfuscated JAR instead of the remapped one&hellip;). Once your decompiler is finished, you&#39;ll be greeted with a folder containing the full source code of Minecraft!</p>
<aside>

<p>Fernflower/Quiltflower accept a great deal of options that control the decompilation process, which are documented on each project&#39;s <a href="https://github.com/QuiltMC/quiltflower">README</a>. If you find that the decompiled code does not meet your expectations, you may have to mess with the command line options that you&#39;re invoking the decompiler with.</p>
</aside>

<h1 id="epilogue">Epilogue <a class="section-link" href="#epilogue">&sect;</a></h1><p>If all of this seems like too much work to you, you&#39;re in luck: there&#39;s a project called <a href="https://github.com/hube12/DecompilerMC">DecompilerMC</a> which will fetch all the tools and files necessary to decompile any version of Minecraft with released mappings automatically. </p>
<p>For versions 1.12 and below, <a href="http://www.modcoderpack.com/">ModCoderPack</a> can be used to deobfuscate Minecraft with community-submitted mappings. Similarly, <a href="https://github.com/MinecraftForge/MCPConfig/tree/master/versions/release">MCPConfig</a> has mappings for 1.12 up to 1.19.</p>
<img id="img-view" style="display: none"><h1>Comments</h1><noscript><b>Please enable Javascript to view the comments on this post.</b></noscript><script src="https://utteranc.es/client.js" crossorigin="anonymous" repo="adrian154/blog" label="blog-post-comments" theme="preferred-color-scheme" issue-number="12"></script></main><footer><p>&copy; 2022 <a href="https://bithole.dev/">Adrian Zhang</a> &bull; <a href="/rss.xml">rss</a> &bull; <a href="https://github.com/adrian154/blog">source</a> &bull; <a href="https://creativecommons.org/licenses/by-sa/3.0/legalcode">CC BY-SA 3.0</a></p></footer></body></html>